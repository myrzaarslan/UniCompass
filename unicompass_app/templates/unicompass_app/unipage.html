{% extends "unicompass_app/layout.html" %}
{% load static %}

{% block body %}
<div class="card">
    <div class="card-header">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="#">Ranking</a>
            <form class="form-inline my-2 my-lg-0 ml-auto">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
        </nav>
    </div>
    
    <div class="card-body">
        <h2 class="card-title text-center">{{ uni.title }}</h2>
        
        <ul class="nav nav-tabs justify-content-center mb-3">
            <li class="nav-item">
                <a class="nav-link" href="#overview" onclick="showSection('overview')">Overview</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#majors" onclick="showSection('majors')">Majors</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#admissions" onclick="showSection('admissions')">Admissions</a>
            </li>
        </ul>

        <!-- Overview section -->
        <div id="overview" class="tab-content">
            <div class="grid-container">
                <div class="grid-image">
                    <img src="{{ uni.img }}" alt="{{ uni.title }}" class="img-thumbnail" width="200" height="200">
                </div>
                <div class="grid-title">
                    <h2>{{ uni.title }}</h2>
                </div>
                <div class="grid-description">
                    <p>{{ uni.description }}</p>
                </div>
            </div>
            <div class="text-center">
                <a href="{{ uni.link }}">Link to Uni</a>
            </div>
            <div class="text-center">
                <p>QS Rank: {{ uni.rank }}</p>
                <p>THE Rank: {{ the_rank }}</p>
            </div>
            <div id="staticMap" style="width: 70%; height: 400px;"></div>
        </div>

        <!-- Majors section -->
        <div id="majors" class="tab-content" style="display: none;">
            <div style="display: flex; justify-content: space-between;">
                <!-- QS Table -->
                <div>
                    <h3>QS Majors</h3>
                    <table class="table table-striped table-dark" border="1">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Major</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>ELCE</td>
                                <td>0.31</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>CS</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>pENIS</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- THE Table -->
                <div>
                    <h3>THE Majors</h3>
                    <table class="table table-striped table-dark" border="1">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Major</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>ELCE</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>CS</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>pENIS</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Admissions section -->
        <div id="admissions" class="tab-content" style="display: none;">
            <h3>Admissions Information:</h3>
            <p>{{ uni.admissions_info }}</p>
        </div>
    </div>
</div>

<script src="https://mapgl.2gis.com/api/js/v1"></script>
<script>
    let longitude = 71.398570871052
    let latitude = 51.09034852272567
    // Initialize the 2GIS MapGL API
    const staticMap = new mapgl.Map('staticMap', {
        center: [longitude, latitude], // Set the coordinates of the university
        zoom: 16, // Set the desired zoom level
        key: '30d26425-fcaa-4926-bcf9-cf725a976d8b' // Replace with your API key
    });
    
    // Add a marker at the university location
    const marker = new mapgl.Marker(map, {
        coordinates: [longitude, latitude]
    });

    function showSection(section) {
        document.getElementById('overview').style.display = 'none';
        document.getElementById('majors').style.display = 'none';
        document.getElementById('admissions').style.display = 'none';

        document.getElementById(section).style.display = 'block';
    }
</script>

<style>
    .grid-container {
        display: grid;
        grid-template-columns: 1fr 2fr;
        grid-template-rows: auto auto;
        gap: 20px;
        align-items: start;
        justify-items: start;
    }

    .grid-image {
        grid-row: 1 / span 2; /* Span two rows */
        justify-self: start;
    }

    .grid-title {
        grid-column: 2;
        grid-row: 1;
        justify-self: start;
    }

    .grid-description {
        grid-column: 2;
        grid-row: 2;
        justify-self: start;
    }
</style>
{% endblock %}
